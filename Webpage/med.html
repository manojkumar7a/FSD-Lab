<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Medicine Reminder â€“ Working</title>

<style>
body {
  margin: 0;
  font-family: Poppins, Arial, sans-serif;
  min-height: 100vh;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  display: flex;
  justify-content: center;
  align-items: center;
}

.card {
  width: 460px;
  padding: 30px;
  border-radius: 20px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(18px);
  border: 1px solid rgba(255,255,255,0.3);
  box-shadow: 0 30px 60px rgba(0,0,0,0.4);
  color: #fff;
}

h2 { text-align: center; }

label {
  display: block;
  margin-top: 12px;
  font-weight: 500;
}

input, select, textarea {
  width: 100%;
  padding: 9px;
  margin-top: 5px;
  border-radius: 8px;
  border: none;
  background: rgba(255,255,255,0.25);
  color: #fff;
}

button {
  margin-top: 20px;
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(135deg, #00c6ff, #0072ff);
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}

.status {
  margin-top: 15px;
  text-align: center;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="card">
<h2>ðŸ’Š Medicine Reminder</h2>

<label>Medicine Name</label>
<input id="medicine">

<label>Dose</label>
<input id="dose">

<label>Reminder Time</label>
<input type="time" id="time">

<button onclick="startReminder()">Start Reminder</button>

<div class="status" id="status"></div>
</div>

<script>
let taken = 0;
let missed = 0;
let reminderStarted = false;

if (Notification.permission !== "granted") {
  Notification.requestPermission();
}

function startReminder() {
  if (reminderStarted) return;

  const med = medicine.value;
  const t = time.value;

  if (!med || !t) {
    alert("Enter medicine name and time");
    return;
  }

  reminderStarted = true;
  status.innerHTML = "â° Reminder is active";

  setInterval(() => {
    const now = new Date();
    const [hh, mm] = t.split(":");

    if (
      now.getHours() == hh &&
      now.getMinutes() == mm &&
      now.getSeconds() === 0
    ) {
      const notification = new Notification("ðŸ’Š Medicine Time", {
        body: `Take ${med} (${dose.value})`,
      });

      notification.onclick = () => {
        taken++;
        updateStatus();
      };

      setTimeout(() => {
        missed++;
        updateStatus();
      }, 60000);
    }
  }, 1000);
}

function updateStatus() {
  const total = taken + missed;
  const rate = total ? ((taken / total) * 100).toFixed(1) : 0;
  status.innerHTML =
    `Taken: ${taken} | Missed: ${missed}<br>Adherence: ${rate}%`;
}
</script>

</body>
</html>
